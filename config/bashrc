#!/bin/bash

# --- VARS --- #
# If not running interactively, don't do anything
[[ $- != *i* ]] && return

# don't put duplicate lines or lines starting with space in the history.
HISTCONTROL=ignoreboth

# for setting history length see HISTSIZE and HISTFILESIZE
HISTSIZE=1000
HISTFILESIZE=1000

# --- PROMPT --- #
PS1='\[\e[0;1;34m\]\u\[\e[0;1;31m\]@\[\e[0;1;34m\]\H\[\e[m\] \[\e[0;1;33m\]\W\[\e[m\] \[\e0' # blue

# --- OPTIONS --- #
# append to the history file, don't overwrite it
shopt -s histappend

# check the window size after each command and, if necessary,
# update the values of LINES and COLUMNS.
shopt -s checkwinsize

# disable ctrl+s, ctrl+q
stty -ixon

# cd into directory by typing its name
#shopt -s autocd

# vi mode
#set -o vi
#bind -m vi-insert "\C-l":clear-screen

# --- ALIASES --- #
alias v="$EDITOR"
alias d="$DOWNLOADER"
alias r="$FILE_MANAGER"
alias nb="$NEWS_READER"
alias cm="$MUSIC_PLAYER"
alias pm="$SOUND_MIXER"
alias ww="$TERMINAL_BROWSER duckduckgo.com/html"
alias wt="torsocks $TERMINAL_BROWSER duckduckgo.com/html"
alias ht='htop'
alias nf='clear; neofetch'
alias mk='sudo make clean && make && sudo make install'

alias gpp="git add .; git commit -m '-'; git push"
alias ga="git add ."
alias gc="git commit -m '-'"
alias gp="git push"

alias l='ls -Fh --color=auto --group-directories-first'
alias ll='clear;ls -lFh --color=auto --group-directories-first'
alias la='ls -aFh --color=auto --group-directories-first'
alias lla='clear;ls -laFh --color=auto --group-directories-first'

alias todo='for i in {00..23}; do for j in 00 20 40; do echo "$i:$j"; done; done'

# --- FUNCTIONS --- #
function cd {
	builtin cd "$@" && l
}

function aur {
	git clone https://aur.archlinux.org/$1.git
}

function wth {
	curl wttr.in/$1
}

function yt {
	[ -z "$1" ] && echo -e "usage:\nyt <v|w|d> <quality> <link>"

	o="$1" && shift
	q="$1" && shift
	[ "$o" = "v" ] && $YOUTUBE_VIEWER --resolution $q
	[ "$o" = "w" ] && mpv --geometry=25%x25%-10-10 --ytdl-format="bestvideo[height<=?$q]+bestaudio/best" $@
	[ "$o" = "d" ] && youtube-dl --add-metadata -ic -f "bestvideo[height<=$q]+bestaudio/best[height<=$q]" $@
}

function fd {
	dirname="$(dirname $(fzf))"
	cd $dirname
}

function fe {
	filename="$(fzf)"
	$EDITOR $filename
}

function fo {
	filename="$(fzf)"
	$OPEN $filename
}

